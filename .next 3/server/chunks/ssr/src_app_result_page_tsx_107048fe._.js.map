{"version":3,"sources":["turbopack:///[project]/src/app/result/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { Suspense, useEffect, useMemo, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\n\ntype Payload = {\n  fortune: string | null;\n  compatibility: string | null;\n  dog: { name: string; breed: string; sex: string; neutered: boolean | null; birth: string | null };\n  owner: { name: string; earthlyBranch: string };\n};\n\nfunction ResultInner() {\n  const params = useSearchParams();\n  const router = useRouter();\n  const [data, setData] = useState<Payload | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const textToShare = useMemo(() => {\n    if (!data) return \"\";\n    const d = data;\n    return `üê∂ PawStars Í≤∞Í≥º\\nÏù¥Î¶Ñ: ${d.dog.name}\\nÍ≤¨Ï¢Ö: ${d.dog.breed}\\n${d.dog.birth ? `ÏÉùÏùº: ${d.dog.birth}\\n` : \"\"}${d.dog.sex !== \"unknown\" ? `ÏÑ±Î≥Ñ: ${d.dog.sex === \"male\" ? \"ÏàòÏª∑\" : \"ÏïîÏª∑\"}${d.dog.neutered === true ? \" (Ï§ëÏÑ±Ìôî)\" : d.dog.neutered === false ? \" (ÎØ∏Ï§ëÏÑ±Ìôî)\" : \"\"}\\n` : \"\"}${d.owner?.name ? `Ï£ºÏù∏: ${d.owner.name}\\n` : \"\"}${d.owner?.earthlyBranch ? `Ï£ºÏù∏ 12ÏßÄÏßÄ: ${d.owner.earthlyBranch}\\n` : \"\"}${d.fortune ? `\\nÏò§ÎäòÏùò Ïö¥ÏÑ∏: \\n${d.fortune}\\n` : \"\"}${d.compatibility ? `\\nüêæ Í∂ÅÌï©: \\n${d.compatibility}` : \"\"}`;\n  }, [data]);\n\n  useEffect(() => {\n    const key = params.get(\"key\");\n    if (!key) {\n      setError(\"Í≤∞Í≥º ÌÇ§Í∞Ä ÏóÜÏñ¥Ïöî. Ï≤òÏùåÎ∂ÄÌÑ∞ Îã§Ïãú ÏßÑÌñâÌï¥ Ï£ºÏÑ∏Ïöî.\");\n      return;\n    }\n    try {\n      const raw = sessionStorage.getItem(`pawstars:${key}`);\n      if (!raw) {\n        setError(\"Ï†ÄÏû•Îêú Í≤∞Í≥ºÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏñ¥Ïöî. Îã§Ïãú ÏßÑÌñâÌï¥ Ï£ºÏÑ∏Ïöî.\");\n        return;\n      }\n      const parsed = JSON.parse(raw) as Payload;\n      setData(parsed);\n    } catch {\n      setError(\"Í≤∞Í≥ºÎ•º Î∂àÎü¨Ïò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏñ¥Ïöî.\");\n    }\n  }, [params]);\n\n  const share = async () => {\n    if (!data) return;\n    const text = textToShare;\n    try {\n      type KakaoTextShare = {\n        objectType: \"text\";\n        text: string;\n        link: { mobileWebUrl: string; webUrl: string };\n      };\n      const w = globalThis as unknown as {\n        Kakao?: { isInitialized?: () => boolean; Share: { sendDefault: (opts: KakaoTextShare) => void } };\n      };\n      if (w?.Kakao && w.Kakao.isInitialized?.()) {\n        w.Kakao.Share.sendDefault({ objectType: \"text\", text, link: { mobileWebUrl: location.href, webUrl: location.href } });\n        return;\n      }\n      if (navigator.share) {\n        await navigator.share({ title: \"PawStars Í≤∞Í≥º\", text });\n        return;\n      }\n      await navigator.clipboard.writeText(text);\n      alert(\"Í≤∞Í≥ºÎ•º ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÌñàÏñ¥Ïöî.\");\n    } catch {\n      try {\n        await navigator.clipboard.writeText(textToShare);\n        alert(\"Í≤∞Í≥ºÎ•º ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÌñàÏñ¥Ïöî.\");\n      } catch {\n        alert(\"Í≥µÏú†Ïóê Ïã§Ìå®ÌñàÏñ¥Ïöî. Îã§Ïãú ÏãúÎèÑÌï¥ Ï£ºÏÑ∏Ïöî.\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen w-full max-w-xl mx-auto px-4 py-5 sm:px-6 sm:py-10\">\n      <h1 className=\"text-xl sm:text-2xl font-bold mb-5 sm:mb-6\">PawStars Í≤∞Í≥º</h1>\n      {error ? (\n        <div className=\"text-red-500 text-sm\">{error}</div>\n      ) : !data ? (\n        <div>Î∂àÎü¨Ïò§Îäî Ï§ë...</div>\n      ) : (\n        <div className=\"space-y-6\">\n          {data.fortune ? (\n            <div className=\"rounded-lg border border-black/10 dark:border-white/20 p-4 whitespace-pre-wrap leading-6\">\n              {data.fortune}\n            </div>\n          ) : null}\n          {data.compatibility ? (\n            <div className=\"rounded-lg border border-black/10 dark:border-white/20 p-4 whitespace-pre-wrap leading-6\">\n              {data.compatibility}\n            </div>\n          ) : null}\n          <div className=\"flex flex-col sm:flex-row gap-3 pt-2\">\n            <button\n              className=\"w-full sm:w-auto rounded-md bg-black text-white dark:bg-white dark:text-black px-4 py-3\"\n              onClick={() => router.push(\"/\")}\n            >\n              Îã§Ïãú Î∂ÑÏÑùÌïòÍ∏∞\n            </button>\n            <button\n              className=\"w-full sm:w-auto rounded-md border border-black/10 dark:border-white/20 px-4 py-3\"\n              onClick={share}\n            >\n              Í≤∞Í≥º Í≥µÏú†ÌïòÍ∏∞\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function ResultPage() {\n  return (\n    <Suspense fallback={<div className=\"min-h-screen w-full max-w-xl mx-auto px-4 py-5 sm:px-6 sm:py-10\">Î∂àÎü¨Ïò§Îäî Ï§ë...</div>}>\n      <ResultInner />\n    </Suspense>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}